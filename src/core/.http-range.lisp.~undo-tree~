(undo-tree-save-format-version . 1)
"13c743a94683f0d123c146bf094d9b0c78e4fa28"
[nil nil nil nil (26804 51808 316578 0) 0 nil]
([nil nil ((nil rear-nonsticky nil 4263 . 4264) (nil fontified nil 1 . 4264) (1 . 4264) (t . -1)) nil (26804 53255 15764 0) 0 nil])
([nil nil ((#(")" 0 1 (fontified t)) . -2545) (undo-tree-id31 . -1) (undo-tree-id32 . -1) (undo-tree-id33 . -1) (undo-tree-id34 . -1) (undo-tree-id35 . -1) (undo-tree-id36 . -1) (undo-tree-id37 . -1) (undo-tree-id38 . -1) 2546 (t 26804 51808 0 0)) nil (26804 53280 433457 0) 0 nil] [nil nil ((#("`" 0 1 (fontified t)) . -2178) (undo-tree-id0 . -1) (undo-tree-id1 . -1) (undo-tree-id2 . -1) (undo-tree-id3 . -1) (undo-tree-id4 . -1) (undo-tree-id5 . -1) (undo-tree-id6 . -1) (undo-tree-id7 . -1) (undo-tree-id8 . -1) (undo-tree-id9 . -1) (undo-tree-id10 . -1) (undo-tree-id11 . -1) (undo-tree-id12 . -1) (undo-tree-id13 . -1) (undo-tree-id14 . -1) (undo-tree-id15 . -1) (undo-tree-id16 . -1) (undo-tree-id17 . -1) (undo-tree-id18 . -1) (undo-tree-id19 . -1) (undo-tree-id20 . -1) 2179 (t 26804 51808 0 0)) ((2178 . 2179)) (26804 53255 15190 0) 0 nil])
([nil nil ((4262 . 4263)) nil (26804 53280 433452 0) 0 nil])
nil
([nil nil ((#(")" 0 1 (fontified t)) . -4261) (undo-tree-id21 . -1) (undo-tree-id22 . -1) (undo-tree-id23 . -1) (undo-tree-id24 . -1) (undo-tree-id25 . -1) (undo-tree-id26 . -1) (undo-tree-id27 . -1) (undo-tree-id28 . -1) (#(")" 0 1 (fontified t)) . -4262) (undo-tree-id29 . -1) (undo-tree-id30 . -1) 4263) nil (26804 53280 433450 0) 0 nil])
([nil nil ((4261 . 4262)) nil (26804 53280 433430 0) 0 nil])
([nil nil ((#("
  (declare (ignore req))" 0 4 (fontified t) 4 11 (face font-lock-keyword-face fontified t) 11 25 (fontified t)) . 2012) (undo-tree-id0 . -25) (t 26804 53280 0 0)) nil (26812 51560 542501 0) 0 nil])
([nil nil ((#("(in-package :cl)

(defpackage :lumen.core.http-range
  (:use :cl)
  (:import-from :lumen.core.http
    :response :respond-404 :respond-text :respond-json
    :resp-headers :resp-status :resp-body)
  (:import-from :lumen.core.sendfile :stream-file-segment)
  (:export :respond-file))

(in-package :lumen.core.http-range)

(defun %down (s) (and s (string-downcase s)))
(defun %header (headers name) (cdr (assoc (string-downcase name) headers :test #'string=)))
(defun %etag-header (etag) (and etag (cons \"ETag\" etag)))
(defun %lastmod-header (rfc1123) (and rfc1123 (cons \"Last-Modified\" rfc1123)))

(defun %parse-range (hdr total)
  \"Retourne cons (start . end) inclusifs, ou NIL si invalide.\"
  (when (and hdr (search \"bytes=\" (string-downcase hdr)))
    (let* ((spec (subseq hdr (1+ (position #\\= hdr))))
           (dash (position #\\- spec))
           (a (string-trim \" \" (subseq spec 0 dash)))
           (b (string-trim \" \" (subseq spec (1+ dash)))))
      (cond
        ((and (string= a \"\") (plusp (length b))) ; -X
         (let* ((len (parse-integer b :junk-allowed t))
                (start (max 0 (- total len)))
                (end   (1- total)))
           (cons start end)))
        ((and (plusp (length a)) (string= b \"\")) ; A-
         (let ((start (parse-integer a :junk-allowed t)))
           (when (< start total) (cons start (1- total)))))
        ((and (plusp (length a)) (plusp (length b))) ; A-B
         (let* ((start (parse-integer a :junk-allowed t))
                (end   (parse-integer b :junk-allowed t)))
           (when (and start end (<= 0 start) (<= start end) (< start total))
             (cons start (min end (1- total))))))
        (t nil)))))

(defun %file-size (path)
  (with-open-file (in path :direction :input :element-type '(unsigned-byte 8))
    (file-length in)))

(defun respond-file (req path &key content-type etag last-modified-rfc1123 (download-filename nil))
  \"Construit une réponse 200/206/416 avec Accept-Ranges, Content-Length et un writer non-chunked.\"
  (unless (probe-file path) (return-from respond-file (respond-404 \"File not found\")))
  (let* ((total (%file-size path))
         (headers `((\"Accept-Ranges\" . \"bytes\")
                    ,@(when content-type `((\"Content-Type\" . ,content-type)))
                    ,@ (when download-filename
                         `((\"Content-Disposition\" . ,(format nil \"attachment; filename=\\\"~A\\\"\" download-filename))))
                    ,@ (when etag `((,(car (%etag-header etag)) . ,(cdr (%etag-header etag)))))
                    ,@ (when last-modified-rfc1123 `((,(car (%lastmod-header last-modified-rfc1123)) . ,(cdr (%lastmod-header last-modified-rfc1123)))))))
         (range-h (%header (slot-value req 'lumen.core.http::headers) \"range\"))
         (if-range (%header (slot-value req 'lumen.core.http::headers) \"if-range\")))
    ;; If-Range simple : si fourni et différent de l’ETag, on ignore Range
    (when (and if-range etag (not (string= if-range etag)))
      (setf range-h nil))
    (let ((span (%parse-range range-h total)))
      (labels ((writer (start end)
                 (lambda (stream)
                   (stream-file-segment stream path start end))))
        (cond
          ;; 206 Partial Content
          (span
           (let* ((start (car span)) (end (cdr span))
                  (len (1+ (- end start)))
                  (resp (make-instance 'response
                                       :status 206
                                       :headers (append
                                                 `((\"Content-Range\" . ,(format nil \"bytes ~D-~D/~D\" start end total))
                                                   (\"Content-Length\" . ,(write-to-string len)))
                                                 headers)
                                       :body (writer start end))))
             resp))
          ;; 200 OK (entier)
          (t
           (let* ((len total)
                  (resp (make-instance 'response
                                       :status 200
                                       :headers (append `((\"Content-Length\" . ,(write-to-string len))) headers)
                                       :body (writer 0 (1- total)))))
             resp)))))))
" 0 1 (fontified t) 1 11 (face font-lock-keyword-face fontified t) 11 12 (fontified t) 12 15 (face font-lock-builtin-face fontified t) 15 19 (fontified t) 19 29 (face font-lock-keyword-face fontified t) 29 30 (fontified t) 30 52 (face font-lock-type-face fontified t) 52 56 (fontified t) 56 60 (face font-lock-builtin-face fontified t) 60 61 (fontified t) 61 64 (face font-lock-builtin-face fontified t) 64 69 (fontified t) 69 81 (face font-lock-builtin-face fontified t) 81 82 (fontified t) 82 98 (face font-lock-builtin-face fontified t) 98 103 (fontified t) 103 112 (face font-lock-builtin-face fontified t) 112 113 (fontified t) 113 125 (face font-lock-builtin-face fontified t) 125 126 (fontified t) 126 139 (face font-lock-builtin-face fontified t) 139 140 (fontified t) 140 153 (face font-lock-builtin-face fontified t) 153 158 (fontified t) 158 171 (face font-lock-builtin-face fontified t) 171 172 (fontified t) 172 184 (face font-lock-builtin-face fontified t) 184 185 (fontified t) 185 195 (face font-lock-builtin-face fontified t) 195 200 (fontified t) 200 212 (face font-lock-builtin-face fontified t) 212 213 (fontified t) 213 233 (face font-lock-builtin-face fontified t) 233 234 (fontified t) 234 254 (face font-lock-builtin-face fontified t) 254 259 (fontified t) 259 266 (face font-lock-builtin-face fontified t) 266 267 (fontified t) 267 280 (face font-lock-builtin-face fontified t) 280 285 (fontified t) 285 295 (face font-lock-keyword-face fontified t) 295 296 (fontified t) 296 318 (face font-lock-builtin-face fontified t) 318 322 (fontified t) 322 327 (face font-lock-keyword-face fontified t) 327 328 (fontified t) 328 333 (face font-lock-function-name-face fontified t) 333 368 (fontified t) 368 373 (face font-lock-keyword-face fontified t) 373 374 (fontified t) 374 381 (face font-lock-function-name-face fontified t) 381 440 (fontified t) 440 445 (face font-lock-builtin-face fontified t) 445 460 (fontified t) 460 465 (face font-lock-keyword-face fontified t) 465 466 (fontified t) 466 478 (face font-lock-function-name-face fontified t) 478 502 (fontified t) 502 508 (face font-lock-string-face fontified t) 508 518 (fontified t) 518 523 (face font-lock-keyword-face fontified t) 523 524 (fontified t) 524 539 (face font-lock-function-name-face fontified t) 539 569 (fontified t) 569 584 (face font-lock-string-face fontified t) 584 597 (fontified t) 597 598 (fontified t) 598 603 (face font-lock-keyword-face fontified t) 603 604 (fontified t) 604 616 (face font-lock-function-name-face fontified t) 616 631 (fontified t) 631 691 (face font-lock-doc-face fontified t) 691 695 (fontified t) 695 699 (face font-lock-keyword-face fontified t) 699 717 (fontified t) 717 725 (face font-lock-string-face fontified t) 725 755 (fontified t) 755 759 (face font-lock-keyword-face fontified t) 759 870 (fontified t) 870 873 (face font-lock-string-face fontified t) 873 924 (fontified t) 924 927 (face font-lock-string-face fontified t) 927 962 (fontified t) 962 966 (face font-lock-keyword-face fontified t) 966 992 (fontified t) 992 994 (face font-lock-string-face fontified t) 994 1016 (fontified t) 1016 1021 (face font-lock-comment-face fontified t) 1021 1031 (fontified t) 1031 1035 (face font-lock-keyword-face fontified t) 1035 1059 (fontified t) 1059 1072 (face font-lock-builtin-face fontified t) 1072 1233 (fontified t) 1233 1235 (face font-lock-string-face fontified t) 1235 1238 (fontified t) 1238 1243 (face font-lock-comment-face fontified t) 1243 1253 (fontified t) 1253 1256 (face font-lock-keyword-face fontified t) 1256 1282 (fontified t) 1282 1295 (face font-lock-builtin-face fontified t) 1295 1313 (fontified t) 1313 1317 (face font-lock-keyword-face fontified t) 1317 1414 (fontified t) 1414 1420 (face font-lock-comment-face fontified t) 1420 1430 (fontified t) 1430 1434 (face font-lock-keyword-face fontified t) 1434 1460 (fontified t) 1460 1473 (face font-lock-builtin-face fontified t) 1473 1500 (fontified t) 1500 1518 (fontified t) 1518 1531 (face font-lock-builtin-face fontified t) 1531 1537 (fontified t) 1537 1549 (fontified t) 1549 1553 (face font-lock-keyword-face fontified t) 1553 1686 (fontified t) 1686 1691 (face font-lock-keyword-face fontified t) 1691 1692 (fontified t) 1692 1702 (face font-lock-function-name-face fontified t) 1702 1713 (fontified t) 1713 1727 (face font-lock-keyword-face fontified t) 1727 1737 (fontified t) 1737 1747 (face font-lock-builtin-face fontified t) 1747 1748 (fontified t) 1748 1754 (face font-lock-builtin-face fontified t) 1754 1755 (fontified t) 1755 1768 (face font-lock-builtin-face fontified t) 1768 1813 (fontified t) 1813 1814 (fontified t) 1814 1819 (face font-lock-keyword-face fontified t) 1819 1820 (fontified t) 1820 1832 (face font-lock-function-name-face fontified t) 1832 1843 (fontified t) 1843 1847 (face font-lock-type-face fontified t) 1847 1915 (fontified t) 1915 2011 (face font-lock-doc-face fontified t) 2011 2015 (fontified t) 2015 2021 (face font-lock-keyword-face fontified t) 2021 2041 (fontified t) 2041 2052 (face font-lock-keyword-face fontified t) 2052 2079 (fontified t) 2079 2095 (face font-lock-string-face fontified t) 2095 2102 (fontified t) 2102 2106 (face font-lock-keyword-face fontified t) 2106 2155 (fontified t) 2155 2170 (face font-lock-string-face fontified t) 2170 2173 (fontified t) 2173 2180 (face font-lock-string-face fontified t) 2180 2205 (fontified t) 2205 2209 (face font-lock-keyword-face fontified t) 2209 2226 (fontified t) 2226 2240 (face font-lock-string-face fontified t) 2240 2284 (fontified t) 2284 2288 (face font-lock-keyword-face fontified t) 2288 2335 (fontified t) 2335 2356 (face font-lock-string-face fontified t) 2356 2372 (fontified t) 2372 2401 (face font-lock-string-face fontified t) 2401 2448 (fontified t) 2448 2452 (face font-lock-keyword-face fontified t) 2452 2544 (fontified t) 2544 2548 (face font-lock-keyword-face fontified t) 2548 2745 (fontified t) 2745 2752 (face font-lock-string-face fontified t) 2752 2826 (fontified t) 2826 2836 (face font-lock-string-face fontified t) 2836 2844 (fontified t) 2844 2847 (face font-lock-comment-delimiter-face fontified t) 2847 2915 (face font-lock-comment-face fontified t) 2915 2920 (fontified t) 2920 2924 (face font-lock-keyword-face fontified t) 2924 3006 (fontified t) 3006 3009 (face font-lock-keyword-face fontified t) 3009 3037 (fontified t) 3037 3048 (fontified t) 3048 3055 (fontified t) 3055 3061 (face font-lock-keyword-face fontified t) 3061 3101 (fontified t) 3101 3107 (face font-lock-keyword-face fontified t) 3107 3192 (fontified t) 3192 3196 (face font-lock-keyword-face fontified t) 3196 3207 (fontified t) 3207 3210 (face font-lock-comment-delimiter-face fontified t) 3210 3230 (face font-lock-comment-face fontified t) 3230 3258 (fontified t) 3258 3262 (face font-lock-keyword-face fontified t) 3262 3431 (fontified t) 3431 3438 (face font-lock-builtin-face fontified t) 3438 3482 (fontified t) 3482 3490 (face font-lock-builtin-face fontified t) 3490 3551 (fontified t) 3551 3566 (face font-lock-string-face fontified t) 3566 3582 (fontified t) 3582 3598 (face font-lock-string-face fontified t) 3598 3669 (fontified t) 3669 3685 (face font-lock-string-face fontified t) 3685 3810 (fontified t) 3810 3815 (face font-lock-builtin-face fontified t) 3815 3868 (fontified t) 3868 3871 (face font-lock-comment-delimiter-face fontified t) 3871 3887 (face font-lock-comment-face fontified t) 3887 3912 (fontified t) 3912 3916 (face font-lock-keyword-face fontified t) 3916 4018 (fontified t) 4018 4025 (face font-lock-builtin-face fontified t) 4025 4069 (fontified t) 4069 4077 (face font-lock-builtin-face fontified t) 4077 4089 (fontified t) 4089 4105 (face font-lock-string-face fontified t) 4105 4181 (fontified t) 4181 4186 (face font-lock-builtin-face fontified t) 4186 4237 (fontified t)) . 1) (undo-tree-id24 . -4237) (undo-tree-id25 . -1420) (t 26812 51560 0 0)) nil (26813 35462 2861 0) 0 nil])
([nil nil ((nil rear-nonsticky nil 6804 . 6805) (nil fontified nil 1 . 6805) (1 . 6805)) nil (26813 35462 2859 0) 0 nil])
([nil nil ((2112 . 2114) (#("  " 0 2 (fontified nil)) . 2111) (undo-tree-id23 . -2) (2110 . 2114)) nil (26813 35462 2858 0) 0 nil])
([nil nil ((nil rear-nonsticky nil 2670 . 2671) (nil fontified nil 2114 . 2671) (2114 . 2671)) nil (26813 35462 2857 0) 0 nil])
([nil nil ((#("
" 0 1 (fontified t)) . -2110) (undo-tree-id21 . -1) (undo-tree-id22 . -1) 2111) nil (26813 35462 2856 0) 0 nil])
([nil nil ((2140 . 2141)) nil (26813 35462 2855 0) 0 nil])
([nil nil ((#("r" 0 1 (fontified t)) . -2140) (undo-tree-id20 . -1) 2141) nil (26813 35462 2854 0) 0 nil])
([nil nil ((2140 . 2146)) nil (26813 35462 2852 0) 0 nil])
([nil nil ((#("u" 0 1 (fontified t)) . -2140) (undo-tree-id14 . -1) (#("p" 0 1 (fontified t)) . -2141) (undo-tree-id15 . -1) (#("l" 0 1 (fontified t)) . -2142) (undo-tree-id16 . -1) (#("o" 0 1 (fontified t)) . -2143) (undo-tree-id17 . -1) (#("a" 0 1 (fontified t)) . -2144) (undo-tree-id18 . -1) (#("d" 0 1 (fontified t)) . -2145) (undo-tree-id19 . -1) 2146) nil (26813 35462 2851 0) 0 nil])
([nil nil ((2143 . 2144)) nil (26813 35462 2847 0) 0 nil])
([nil nil ((2144 . 2145)) nil (26813 35462 2847 0) 0 nil])
([nil nil ((2145 . 2148)) nil (26813 35462 2846 0) 0 nil])
([nil nil ((2148 . 2149)) nil (26813 35462 2846 0) 0 nil])
([nil nil ((2149 . 2156)) nil (26813 35462 2846 0) 0 nil])
([nil nil ((#("r" 0 1 (fontified t)) . -2151) (undo-tree-id9 . -1) (#("o" 0 1 (fontified t)) . -2152) (undo-tree-id10 . -1) (#("u" 0 1 (fontified t)) . -2153) (undo-tree-id11 . -1) (#("t" 0 1 (fontified t)) . -2154) (undo-tree-id12 . -1) (#("e" 0 1 (fontified t)) . -2155) (undo-tree-id13 . -1) 2156) nil (26813 35462 2845 0) 0 nil])
([nil nil ((2151 . 2153)) nil (26813 35462 2842 0) 0 nil])
([nil nil ((#("o" 0 1 (fontified t)) . -2152) (undo-tree-id8 . -1) 2153) nil (26813 35462 2841 0) 0 nil])
([nil nil ((2152 . 2161)) nil (26813 35462 2840 0) 0 nil])
([nil nil ((2157 . 2158)) nil (26813 35462 2840 0) 0 nil])
([nil nil ((2162 . 2163)) nil (26813 35462 2840 0) 0 nil])
([nil nil ((2163 . 2164)) nil (26813 35462 2839 0) 0 nil])
([nil nil ((#("'" 0 1 (fontified t)) . -2163) (undo-tree-id7 . -1) 2164) nil (26813 35462 2839 0) 0 nil])
([nil nil ((2163 . 2172)) nil (26813 35462 2838 0) 0 nil])
([nil nil ((2172 . 2175)) nil (26813 35462 2838 0) 0 nil])
([nil nil ((2164 . 2181) (#("lumen.core." 0 11 (fontified t)) . -2164) (undo-tree-id6 . -11) 2175) nil (26813 35462 2837 0) 0 nil])
([nil nil ((2181 . 2186)) nil (26813 35462 2835 0) 0 nil])
([nil nil ((2164 . 2189) (#("lumen.core.config:cfg-" 0 22 (fontified t)) . -2164) (undo-tree-id5 . -22) 2186) nil (26813 35462 2835 0) 0 nil])
([nil nil ((2189 . 2190)) nil (26813 35462 2834 0) 0 nil])
([nil nil ((2190 . 2203)) nil (26813 35462 2833 0) 0 nil])
([nil nil ((2191 . 2193)) nil (26813 35462 2833 0) 0 nil])
([nil nil ((2193 . 2196)) nil (26813 35462 2832 0) 0 nil])
([nil nil ((#("S" 0 1 (face font-lock-string-face fontified t)) . -2195) (undo-tree-id4 . -1) 2196) nil (26813 35462 2832 0) 0 nil])
([nil nil ((2195 . 2196)) nil (26813 35462 2831 0) 0 nil])
([nil nil ((2195 . 2196)) nil (26813 35462 2831 0) 0 nil])
([nil nil ((#("S" 0 1 (face font-lock-string-face fontified t)) . -2203) (undo-tree-id3 . -1) 2204) nil (26813 35462 2830 0) 0 nil])
([nil nil ((2203 . 2204)) nil (26813 35462 2829 0) 0 nil])
([nil nil ((2210 . 2212)) nil (26813 35462 2828 0) 0 nil])
([nil nil ((#("(merge-pathnames #P\"files/courriers/\" crd.backend.app:*be-dir*)" 0 19 (fontified t) 19 37 (face font-lock-string-face fontified t) 37 63 (fontified t)) . 2468) (undo-tree-id2 . -63) 2531) nil (26813 35462 2828 0) 0 nil])
([nil nil ((227 . 230) (#(" " 0 1 (fontified nil)) . -207) (undo-tree-id1 . -1) (227 . 228)) nil (26813 35462 2826 0) 0 nil])
([nil nil ((230 . 235)) nil (26813 35462 2825 0) 0 nil])
([nil nil ((230 . 247) (#("resol" 0 5 (fontified t)) . -230) (undo-tree-id0 . -5) 235) nil (26813 35462 2823 0) 0 nil])
([nil nil ((230 . 231)) nil (26813 35462 2805 0) 0 nil])
([nil nil ((#(":respond-416" 0 12 (face font-lock-builtin-face fontified t)) . -126) (undo-tree-id59 . -12) (undo-tree-id60 . -12) (undo-tree-id61 . -12) (undo-tree-id62 . -12) (undo-tree-id63 . -12) (undo-tree-id64 . -12) (undo-tree-id65 . -12) (undo-tree-id66 . -12) (undo-tree-id67 . -12) (undo-tree-id68 . -12) (undo-tree-id69 . -12) (undo-tree-id70 . -12) (undo-tree-id71 . -12) (undo-tree-id72 . -12) (undo-tree-id73 . -12) (undo-tree-id74 . -12) (undo-tree-id75 . -8) (undo-tree-id76 . -8) (undo-tree-id77 . -8) (undo-tree-id78 . -8) (undo-tree-id79 . -8) (undo-tree-id80 . -8) (undo-tree-id81 . -12) (undo-tree-id82 . -12) (undo-tree-id83 . -12) (undo-tree-id84 . -12) 138 (t 26813 35462 0 0)) nil (26813 37492 461103 0) 0 nil])
([nil nil ((#(" " 0 1 (fontified t)) . -125) (undo-tree-id26 . -1) (undo-tree-id27 . -1) (undo-tree-id28 . -1) (undo-tree-id29 . -1) (undo-tree-id30 . -1) (undo-tree-id31 . -1) (undo-tree-id32 . -1) (undo-tree-id33 . -1) (undo-tree-id34 . -1) (undo-tree-id35 . -1) (undo-tree-id36 . -1) (undo-tree-id37 . -1) (undo-tree-id38 . -1) (undo-tree-id39 . -1) (undo-tree-id40 . -1) (undo-tree-id41 . -1) (undo-tree-id42 . -1) (undo-tree-id43 . -1) (undo-tree-id44 . -1) (undo-tree-id45 . -1) (undo-tree-id46 . -1) (undo-tree-id47 . -1) (undo-tree-id48 . -1) (undo-tree-id49 . -1) (undo-tree-id50 . -1) (undo-tree-id51 . -1) (undo-tree-id52 . -1) (undo-tree-id53 . -1) (undo-tree-id54 . -1) (undo-tree-id55 . -1) (undo-tree-id56 . -1) (undo-tree-id57 . -1) (undo-tree-id58 . -1) 126) nil (26813 37492 461082 0) 0 nil])
([nil nil ((2118 . 2119) (t 26813 37492 0 0)) nil (26813 37509 905302 0) 0 nil])
([nil nil ((#("root" 0 4 (fontified t)) . -2677) (undo-tree-id110 . -4) (undo-tree-id111 . -2) (undo-tree-id112 . -2) (undo-tree-id113 . -2) (undo-tree-id114 . -2) (undo-tree-id115 . -2) (undo-tree-id116 . -2) (undo-tree-id117 . -2) (undo-tree-id118 . -2) (undo-tree-id119 . -2) (undo-tree-id120 . -2) (undo-tree-id121 . -2) (undo-tree-id122 . -2) (undo-tree-id123 . -2) (undo-tree-id124 . -2) (undo-tree-id125 . -1) (undo-tree-id126 . -1) (undo-tree-id127 . -1) (undo-tree-id128 . -1) (undo-tree-id129 . -1) (undo-tree-id130 . -4) (undo-tree-id131 . -4) (undo-tree-id132 . -4) (undo-tree-id133 . -4) (undo-tree-id134 . -4) (undo-tree-id135 . -4) (undo-tree-id136 . -4) (undo-tree-id137 . -4) 2681 (t 26813 37509 0 0)) nil (26813 37573 406182 0) 0 nil])
([nil nil ((nil rear-nonsticky nil 2687 . 2688) (nil fontified nil 2677 . 2688) (2677 . 2688)) nil (26813 37573 406167 0) 0 nil])
([nil nil ((#("(root )
         " 0 6 (fontified t) 6 8 (fontified t) 8 17 (fontified t)) . -2471) (undo-tree-id85 . -6) (undo-tree-id86 . -17) (undo-tree-id87 . -5) (undo-tree-id88 . -5) (undo-tree-id89 . -5) (undo-tree-id90 . -5) (undo-tree-id91 . -5) (undo-tree-id92 . -5) (undo-tree-id93 . -5) (undo-tree-id94 . -6) (undo-tree-id95 . -6) (undo-tree-id96 . -6) (undo-tree-id97 . -6) (undo-tree-id98 . -6) (undo-tree-id99 . -6) (undo-tree-id100 . -6) (undo-tree-id101 . -6) (undo-tree-id102 . -6) (undo-tree-id103 . -8) (undo-tree-id104 . -17) (undo-tree-id105 . -17) (undo-tree-id106 . -17) (undo-tree-id107 . -17) (undo-tree-id108 . -17) (undo-tree-id109 . -17) 2488) nil (26813 37573 406163 0) 0 nil])
([nil nil ((#("'" 0 1 (fontified t)) . -2158) (undo-tree-id139 . -1) (undo-tree-id140 . -1) 2159 (t 26813 37573 0 0)) nil (26813 38690 534887 0) 0 nil])
([nil nil ((#("s" 0 1 (face font-lock-string-face fontified t)) . -2211) (undo-tree-id138 . -1) 2212) nil (26813 38690 534883 0) 0 nil])
([nil nil ((2211 . 2212)) nil (26813 38690 534868 0) 0 nil])
([nil nil ((66 . 69) (t 26813 38690 0 0)) nil (26813 40458 661612 0) 0 nil])
([nil nil ((nil rear-nonsticky nil 113 . 114) (nil fontified nil 113 . 114) (nil fontified nil 100 . 113) (nil fontified nil 99 . 100) (nil fontified nil 83 . 99) (nil fontified nil 82 . 83) (nil fontified nil 70 . 82) (nil fontified nil 69 . 70) (69 . 114)) nil (26813 40458 661611 0) 0 nil])
([nil nil ((#("http" 0 4 (face font-lock-builtin-face fontified t)) . -95) (undo-tree-id24 . -4) (undo-tree-id25 . -4) (undo-tree-id26 . -4) (undo-tree-id27 . -4) (undo-tree-id28 . -4) (undo-tree-id29 . -4) (undo-tree-id30 . -4) (undo-tree-id31 . -4) (undo-tree-id32 . -4) 99) nil (26813 40458 661609 0) 0 nil])
([nil nil ((95 . 99)) nil (26813 40458 661602 0) 0 nil])
([nil nil ((#(":respond-html" 0 13 (face font-lock-builtin-face fontified t)) . -100) (undo-tree-id9 . -13) (undo-tree-id10 . -8) (undo-tree-id11 . -8) (undo-tree-id12 . -8) (undo-tree-id13 . -8) (undo-tree-id14 . -8) (undo-tree-id15 . -8) (undo-tree-id16 . -13) (undo-tree-id17 . -13) (undo-tree-id18 . -13) (undo-tree-id19 . -13) (undo-tree-id20 . -13) (undo-tree-id21 . -13) (undo-tree-id22 . -13) (undo-tree-id23 . -13) 113) nil (26813 40458 661601 0) 0 nil])
([nil nil ((100 . 105)) nil (26813 40458 661591 0) 0 nil])
([nil nil ((100 . 118) (#("guess" 0 5 (fontified t)) . -100) (undo-tree-id0 . -5) (undo-tree-id1 . -2) (undo-tree-id2 . -2) (undo-tree-id3 . -3) (undo-tree-id4 . -3) (undo-tree-id5 . -4) (undo-tree-id6 . -4) (undo-tree-id7 . -5) (undo-tree-id8 . -5) 105) nil (26813 40458 661589 0) 0 nil])
([nil nil ((100 . 101)) nil (26813 40458 661562 0) 0 nil])
([nil nil ((119 . 120) (t 26813 40458 0 0)) nil (26813 40471 571821 0) 0 nil])
([nil nil ((nil rear-nonsticky nil 136 . 137) (nil fontified nil 120 . 137) (120 . 137)) nil (26813 40471 571817 0) 0 nil])
([nil nil ((6104 . 6114) (t 26813 40471 0 0)) nil (26823 1688 205461 0) 0 nil])
([nil nil ((nil rear-nonsticky nil 6151 . 6152) (nil fontified nil 6143 . 6152) (nil fontified nil 6128 . 6143) (nil fontified nil 6121 . 6128) (nil fontified nil 6117 . 6121) (nil fontified nil 6114 . 6117) (6114 . 6152)) nil (26823 1688 205460 0) 0 nil])
([nil nil ((#("lm" 0 2 (fontified t)) . -6122) (undo-tree-id5 . -2) 6124) nil (26823 1688 205459 0) 0 nil])
([nil nil ((6122 . 6129)) nil (26823 1688 205459 0) 0 nil])
([nil nil ((#("`((\"Last-Modified\" . ,lm))" 0 3 (fontified t) 3 18 (face font-lock-string-face fontified t) 18 26 (fontified t)) . -6130) (undo-tree-id4 . -26) 6156) nil (26823 1688 205458 0) 0 nil])
([nil nil ((6130 . 6134)) nil (26823 1688 205457 0) 0 nil])
([nil nil ((#("d" 0 1 (fontified t)) . -6133) (undo-tree-id3 . -1) 6134) nil (26823 1688 205456 0) 0 nil])
([nil nil ((6133 . 6138)) nil (26823 1688 205454 0) 0 nil])
([nil nil ((5094 . 5100)) nil (26823 1688 205454 0) 0 nil])
([nil nil ((#("e" 0 1 (fontified t)) . -5097) (undo-tree-id0 . -1) (#("r" 0 1 (fontified t)) . -5098) (undo-tree-id1 . -1) (#("s" 0 1 (fontified t)) . -5099) (undo-tree-id2 . -1) 5100) nil (26823 1688 205452 0) 0 nil])
([nil nil ((5097 . 5101)) nil (26823 1688 205436 0) 0 nil])
([nil nil ((5101 . 5102)) nil (26823 1688 205432 0) 0 nil])
([nil nil ((#("," 0 1 (fontified t)) . -6138) (undo-tree-id6 . -1) (undo-tree-id7 . -1) (undo-tree-id8 . -1) (undo-tree-id9 . -1) (undo-tree-id10 . -1) (undo-tree-id11 . -1) (undo-tree-id12 . -1) (undo-tree-id13 . -1) (undo-tree-id14 . -1) (undo-tree-id15 . -1) (undo-tree-id16 . -1) 6139 (t 26823 1688 0 0)) nil (26823 1714 533866 0) 0 nil])
([nil nil ((5650 . 5655) (t 26823 1714 0 0)) nil (26833 15576 577052 0) 0 nil])
([nil nil ((5655 . 5662)) nil (26833 15576 577052 0) 0 nil])
([nil nil ((5662 . 5663)) nil (26833 15576 577051 0) 0 nil])
([nil nil ((5663 . 5664)) nil (26833 15576 577051 0) 0 nil])
([nil nil ((5664 . 5665)) nil (26833 15576 577050 0) 0 nil])
([nil nil ((5665 . 5674)) nil (26833 15576 577050 0) 0 nil])
([nil nil ((5674 . 5675)) nil (26833 15576 577050 0) 0 nil])
([nil nil ((5675 . 5676)) nil (26833 15576 577049 0) 0 nil])
([nil nil ((#("Ã" 0 1 (face font-lock-string-face fontified t)) . -5675) (undo-tree-id10 . -1) 5676) nil (26833 15576 577049 0) 0 nil])
([nil nil ((5675 . 5677)) nil (26833 15576 577048 0) 0 nil])
([nil nil ((5677 . 5678)) nil (26833 15576 577047 0) 0 nil])
([nil nil ((5678 . 5679)) nil (26833 15576 577047 0) 0 nil])
([nil nil ((#(" " 0 1 (face font-lock-string-face fontified t)) . -5677) (undo-tree-id8 . -1) (#("~" 0 1 (face font-lock-string-face fontified t)) . -5678) (undo-tree-id9 . -1) 5679) nil (26833 15576 577046 0) 0 nil])
([nil nil ((5677 . 5679)) nil (26833 15576 577045 0) 0 nil])
([nil nil ((5679 . 5685)) nil (26833 15576 577044 0) 0 nil])
([nil nil ((5685 . 5686)) nil (26833 15576 577044 0) 0 nil])
([nil nil ((5686 . 5689)) nil (26833 15576 577044 0) 0 nil])
([nil nil ((#("#" 0 1 (face font-lock-string-face fontified t)) . -5688) (undo-tree-id7 . -1) 5689) nil (26833 15576 577043 0) 0 nil])
([nil nil ((5688 . 5690)) nil (26833 15576 577042 0) 0 nil])
([nil nil ((5690 . 5692)) nil (26833 15576 577042 0) 0 nil])
([nil nil ((#("%" 0 1 (face font-lock-string-face fontified t)) . -5691) (undo-tree-id6 . -1) 5692) nil (26833 15576 577041 0) 0 nil])
([nil nil ((5691 . 5693)) nil (26833 15576 577039 0) 0 nil])
([nil nil ((5693 . 5694)) nil (26833 15576 577039 0) 0 nil])
([nil nil ((5694 . 5698)) nil (26833 15576 577038 0) 0 nil])
([nil nil ((5698 . 5702)) nil (26833 15576 577038 0) 0 nil])
([nil nil ((5702 . 5703)) nil (26833 15576 577037 0) 0 nil])
([nil nil ((5703 . 5704)) nil (26833 15576 577037 0) 0 nil])
([nil nil ((5704 . 5708)) nil (26833 15576 577037 0) 0 nil])
([nil nil ((#("=" 0 1 (face font-lock-string-face fontified t)) . -5707) (undo-tree-id5 . -1) 5708) nil (26833 15576 577036 0) 0 nil])
([nil nil ((5707 . 5708)) nil (26833 15576 577035 0) 0 nil])
([nil nil ((5708 . 5713)) nil (26833 15576 577035 0) 0 nil])
([nil nil ((5713 . 5714)) nil (26833 15576 577034 0) 0 nil])
([nil nil ((5714 . 5717)) nil (26833 15576 577034 0) 0 nil])
([nil nil ((#("," 0 1 (face font-lock-string-face fontified t)) . -5716) (undo-tree-id4 . -1) 5717) nil (26833 15576 577033 0) 0 nil])
([nil nil ((5716 . 5719)) nil (26833 15576 577032 0) 0 nil])
([nil nil ((5719 . 5720)) nil (26833 15576 577032 0) 0 nil])
([nil nil ((5720 . 5722)) nil (26833 15576 577032 0) 0 nil])
([nil nil ((5722 . 5723)) nil (26833 15576 577031 0) 0 nil])
([nil nil ((5723 . 5726)) nil (26833 15576 577031 0) 0 nil])
([nil nil ((5707 . 5708)) nil (26833 15576 577031 0) 0 nil])
([nil nil ((5785 . 5792)) nil (26833 15576 577030 0) 0 nil])
([nil nil ((nil rear-nonsticky nil 5863 . 5864) (nil fontified nil 5845 . 5864) (nil fontified nil 5802 . 5845) (nil fontified nil 5792 . 5802) (5792 . 5864)) nil (26833 15576 577030 0) 0 nil])
([nil nil ((#("TOTAl" 0 5 (face font-lock-string-face fontified t)) . -5805) (undo-tree-id3 . -5) 5810) nil (26833 15576 577029 0) 0 nil])
([nil nil ((5805 . 5806)) nil (26833 15576 577028 0) 0 nil])
([nil nil ((#("RANGE" 0 5 (face font-lock-string-face fontified t)) . -5812) (undo-tree-id2 . -5) 5817) nil (26833 15576 577027 0) 0 nil])
([nil nil ((5812 . 5813)) nil (26833 15576 577026 0) 0 nil])
([nil nil ((#("LM: ~A~%TAG: ~A~%" 0 17 (face font-lock-string-face fontified t)) . -5819) (undo-tree-id1 . -17) 5836) nil (26833 15576 577025 0) 0 nil])
([nil nil ((#("total range lm tg" 0 17 (fontified t)) . -5821) (undo-tree-id0 . -17) 5838) nil (26833 15576 577023 0) 0 nil])
([nil nil ((5821 . 5822)) nil (26833 15576 577007 0) 0 nil])
([nil nil ((5822 . 5823)) nil (26833 15576 577006 0) 0 nil])
([nil nil ((5823 . 5824)) nil (26833 15576 577002 0) 0 nil])
([nil nil ((7598 . 7600) (t 26833 15576 0 0)) nil (26945 37657 516195 0) 0 nil])
([nil nil ((nil rear-nonsticky nil 10149 . 10150) (nil fontified nil 10113 . 10150) (nil fontified nil 9972 . 10113) (nil fontified nil 9970 . 9972) (nil fontified nil 9909 . 9970) (nil fontified nil 9903 . 9909) (nil fontified nil 9877 . 9903) (nil fontified nil 9873 . 9877) (nil fontified nil 9798 . 9873) (nil fontified nil 9795 . 9798) (nil fontified nil 9752 . 9795) (nil fontified nil 9748 . 9752) (nil fontified nil 9685 . 9748) (nil fontified nil 9672 . 9685) (nil fontified nil 9647 . 9672) (nil fontified nil 9644 . 9647) (nil fontified nil 9585 . 9644) (nil fontified nil 9572 . 9585) (nil fontified nil 9513 . 9572) (nil fontified nil 9507 . 9513) (nil fontified nil 9506 . 9507) (nil fontified nil 9496 . 9506) (nil fontified nil 9488 . 9496) (nil fontified nil 9474 . 9488) (nil fontified nil 9430 . 9474) (nil fontified nil 9424 . 9430) (nil fontified nil 9422 . 9424) (nil fontified nil 9417 . 9422) (nil fontified nil 9384 . 9417) (nil fontified nil 9376 . 9384) (nil fontified nil 9344 . 9376) (nil fontified nil 9337 . 9344) (nil fontified nil 9255 . 9337) (nil fontified nil 9253 . 9255) (nil fontified nil 9252 . 9253) (nil fontified nil 9247 . 9252) (nil fontified nil 9241 . 9247) (nil fontified nil 9233 . 9241) (nil fontified nil 9228 . 9233) (nil fontified nil 9221 . 9228) (nil fontified nil 9135 . 9221) (nil fontified nil 9129 . 9135) (nil fontified nil 9086 . 9129) (nil fontified nil 9084 . 9086) (nil fontified nil 9060 . 9084) (nil fontified nil 9054 . 9060) (nil fontified nil 9047 . 9054) (nil fontified nil 9043 . 9047) (nil fontified nil 9007 . 9043) (nil fontified nil 8992 . 9007) (nil fontified nil 8985 . 8992) (nil fontified nil 8981 . 8985) (nil fontified nil 8939 . 8981) (nil fontified nil 8919 . 8939) (nil fontified nil 8903 . 8919) (nil fontified nil 8888 . 8903) (nil fontified nil 8846 . 8888) (nil fontified nil 8842 . 8846) (nil fontified nil 8798 . 8842) (nil fontified nil 8794 . 8798) (nil fontified nil 8753 . 8794) (nil fontified nil 8737 . 8753) (nil fontified nil 8711 . 8737) (nil fontified nil 8704 . 8711) (nil fontified nil 8700 . 8704) (nil fontified nil 8685 . 8700) (nil fontified nil 8651 . 8685) (nil fontified nil 8637 . 8651) (nil fontified nil 8626 . 8637) (nil fontified nil 8622 . 8626) (nil fontified nil 8613 . 8622) (nil fontified nil 8603 . 8613) (nil fontified nil 8600 . 8603) (nil fontified nil 8579 . 8600) (nil fontified nil 8568 . 8579) (nil fontified nil 8564 . 8568) (nil fontified nil 8542 . 8564) (nil fontified nil 8508 . 8542) (nil fontified nil 8503 . 8508) (nil fontified nil 8499 . 8503) (nil fontified nil 8486 . 8499) (nil fontified nil 8415 . 8486) (nil fontified nil 8411 . 8415) (nil fontified nil 8408 . 8411) (nil fontified nil 8387 . 8408) (nil fontified nil 8385 . 8387) (nil fontified nil 8372 . 8385) (nil fontified nil 8354 . 8372) (nil fontified nil 8304 . 8354) (nil fontified nil 8285 . 8304) (nil fontified nil 8260 . 8285) (nil fontified nil 8217 . 8260) (nil fontified nil 8183 . 8217) (nil fontified nil 8178 . 8183) (nil fontified nil 8115 . 8178) (nil fontified nil 8108 . 8115) (nil fontified nil 7882 . 8108) (nil fontified nil 7878 . 7882) (nil fontified nil 7871 . 7878) (nil fontified nil 7855 . 7871) (nil fontified nil 7812 . 7855) (nil fontified nil 7801 . 7812) (nil fontified nil 7779 . 7801) (nil fontified nil 7773 . 7779) (nil fontified nil 7769 . 7773) (nil fontified nil 7695 . 7769) (nil fontified nil 7632 . 7695) (nil fontified nil 7628 . 7632) (nil fontified nil 7619 . 7628) (nil fontified nil 7607 . 7619) (nil fontified nil 7606 . 7607) (nil fontified nil 7601 . 7606) (nil fontified nil 7600 . 7601) (7600 . 10150)) nil (26945 37657 516188 0) 0 nil])
([nil nil ((#("(lambda (send)
                                   (with-open-file (in pn :direction :input
                                                          :element-type '(unsigned-byte 8))
                                     (let ((buf (make-array 65536 :element-type '(unsigned-byte 8))))
                                       (loop
                                         (let ((rd (read-sequence buf in)))
                                           (when (or (null rd) (= rd 0)) (return))
                                           (funcall send (if (= rd (length buf))
                                                             buf
                                                             (subseq buf 0 rd))))))))" 0 1 (fontified t) 1 7 (face font-lock-keyword-face fontified t) 7 51 (fontified t) 51 65 (face font-lock-keyword-face fontified t) 65 73 (fontified t) 73 83 (face font-lock-builtin-face fontified t) 83 84 (fontified t) 84 90 (face font-lock-builtin-face fontified t) 90 149 (fontified t) 149 162 (face font-lock-builtin-face fontified t) 162 221 (fontified t) 221 224 (face font-lock-keyword-face fontified t) 224 249 (fontified t) 249 262 (face font-lock-builtin-face fontified t) 262 325 (fontified t) 325 329 (face font-lock-keyword-face fontified t) 329 372 (fontified t) 372 375 (face font-lock-keyword-face fontified t) 375 450 (fontified t) 450 454 (face font-lock-keyword-face fontified t) 454 480 (fontified t) 480 486 (face font-lock-keyword-face fontified t) 486 547 (fontified t) 547 549 (face font-lock-keyword-face fontified t) 549 690 (fontified t) 690 720 (fontified t)) . -9423) (undo-tree-id0 . -720) (undo-tree-id1 . -678) (undo-tree-id2 . -720) (undo-tree-id3 . -720) (undo-tree-id4 . -635) (undo-tree-id5 . -720) (undo-tree-id6 . -720) (undo-tree-id7 . -720) (undo-tree-id8 . -720) 10143 (t 26945 37657 0 0)) nil (26945 37713 211963 0) 0 nil])
([nil nil ((9423 . 9425)) nil (26945 37713 211941 0) 0 nil])
([nil nil ((779 . 781) (t 26945 37713 0 0)) nil (26945 37893 420490 0) 0 nil])
([nil nil ((nil rear-nonsticky nil 1118 . 1119) (nil fontified nil 781 . 1119) (781 . 1119)) nil (26945 37893 420489 0) 0 nil])
([nil nil ((#("pn" 0 2 (fontified t)) . -9763) (undo-tree-id9 . -2) (undo-tree-id10 . -2) (undo-tree-id11 . -1) (undo-tree-id12 . -1) (undo-tree-id13 . -1) (undo-tree-id14 . -1) (undo-tree-id15 . -1) (undo-tree-id16 . -2) (undo-tree-id17 . -2) (undo-tree-id18 . -2) (undo-tree-id19 . -2) (undo-tree-id20 . -2) (undo-tree-id21 . -2) (undo-tree-id22 . -2) (undo-tree-id23 . -2) 9765) nil (26945 37893 420487 0) 0 nil])
([nil nil ((nil rear-nonsticky nil 9793 . 9794) (nil fontified nil 9763 . 9794) (9763 . 9794)) nil (26945 37893 420462 0) 0 nil])
([nil nil ((1 . 2) (t 26993 53276 0 0)) nil (26996 60740 575043 0) 0 nil])
([nil nil ((#("
" 0 1 (fontified t)) . -1) (undo-tree-id54 . -1) 2) nil (26996 60740 575042 0) 0 nil])
([nil nil ((#("
(defun respond-file (req pn &key content-type headers last-modified-rfc1123 etag cache-secs)
  \"Répond 200 (entier) ou 206 (Range) selon le header Range. Respecte HEAD.\"
  (unless (probe-file pn)
    (return-from respond-file (lumen.core.http:respond-404 \"File not found\")))
  (let* ((total (%file-size pn))
         (ct    (or content-type (guess-content-type pn)))
         (lm    (or last-modified-rfc1123 (%http-date pn)))
         (tg    (or etag (%weak-etag-from-file pn)))
         (range (cdr (assoc \"range\" (lumen.core.http:req-headers req)
                            :test #'string-equal))))
    (format t \"~&TOTAl: ~A~%RANGE: ~A~%LM: ~A~%TAG: ~A~%\" total range lm tg)
    (multiple-value-bind (s e) (%parse-range range total)
      (format t \"~&S: ~A~%E: ~A~%\" s e)
      (if (and s e)
          ;; 206
          (respond-file-range req pn s e
                              :content-type ct :etag tg
                              :last-modified-rfc1123 lm :cache-secs cache-secs)
        ;; 200 plein
        (let* ((hdrs `((\"Content-Type\"   . ,ct)
                       (\"Accept-Ranges\"  . \"bytes\")
                       (\"Content-Length\" . ,(write-to-string total))
		       ,@(when headers headers)
                       ,@(when cache-secs
                           `((\"Cache-Control\" . ,(format nil \"public, max-age=~D\" cache-secs))))
                       ,@(when lm `((\"Last-Modified\" . ,lm)))
                       ,@(when tg `((\"ETag\" . ,tg))))))
          (if (string= (lumen.core.http:req-method req) \"HEAD\")
              (make-instance 'lumen.core.http:response
                             :status 200 :headers hdrs :body \"\")
            (make-instance 'lumen.core.http:response
                           :status 200
                           :headers hdrs
                           :body (lambda (send)
                                   (with-open-file (in pn :direction :input
                                                          :element-type '(unsigned-byte 8))
                                     (let ((buf (make-array 65536 :element-type '(unsigned-byte 8))))
                                       (loop
                                         (let ((rd (read-sequence buf in)))
                                           (when (or (null rd) (= rd 0)) (return))
                                           (funcall send (if (= rd (length buf))
                                                             buf
                                                             (subseq buf 0 rd)))))))))))))))" 0 1 (fontified t) 1 2 (fontified t) 2 7 (face font-lock-keyword-face fontified t) 7 8 (fontified t) 8 20 (face font-lock-function-name-face fontified t) 20 29 (fontified t) 29 33 (face font-lock-type-face fontified t) 33 96 (fontified t) 96 170 (face font-lock-doc-face fontified t) 170 174 (fontified t) 174 180 (face font-lock-keyword-face fontified t) 180 202 (fontified t) 202 213 (face font-lock-keyword-face fontified t) 213 256 (fontified t) 256 272 (face font-lock-string-face fontified t) 272 279 (fontified t) 279 283 (face font-lock-keyword-face fontified t) 283 509 (fontified t) 509 516 (face font-lock-string-face fontified t) 516 579 (fontified t) 579 584 (face font-lock-builtin-face fontified t) 584 618 (fontified t) 618 661 (face font-lock-string-face fontified t) 661 686 (fontified t) 686 705 (face font-lock-keyword-face fontified t) 705 735 (fontified t) 735 739 (fontified t) 739 755 (fontified t) 755 773 (face font-lock-string-face fontified t) 773 786 (fontified t) 786 788 (face font-lock-keyword-face fontified t) 788 809 (fontified t) 809 812 (face font-lock-comment-delimiter-face fontified t) 812 816 (face font-lock-comment-face fontified t) 816 887 (fontified t) 887 900 (face font-lock-builtin-face fontified t) 900 904 (fontified t) 904 909 (face font-lock-builtin-face fontified t) 909 943 (fontified t) 943 965 (face font-lock-builtin-face fontified t) 965 969 (fontified t) 969 980 (face font-lock-builtin-face fontified t) 980 1001 (fontified t) 1001 1004 (face font-lock-comment-delimiter-face fontified t) 1004 1014 (face font-lock-comment-face fontified t) 1014 1023 (fontified t) 1023 1027 (face font-lock-keyword-face fontified t) 1027 1038 (fontified t) 1038 1052 (face font-lock-string-face fontified t) 1052 1086 (fontified t) 1086 1101 (face font-lock-string-face fontified t) 1101 1105 (fontified t) 1105 1112 (face font-lock-string-face fontified t) 1112 1138 (fontified t) 1138 1154 (face font-lock-string-face fontified t) 1154 1195 (fontified t) 1195 1199 (face font-lock-keyword-face fontified t) 1199 1243 (fontified t) 1243 1247 (face font-lock-keyword-face fontified t) 1247 1289 (fontified t) 1289 1304 (face font-lock-string-face fontified t) 1304 1320 (fontified t) 1320 1340 (face font-lock-string-face fontified t) 1340 1382 (fontified t) 1382 1386 (face font-lock-keyword-face fontified t) 1386 1393 (fontified t) 1393 1408 (face font-lock-string-face fontified t) 1408 1444 (fontified t) 1444 1448 (face font-lock-keyword-face fontified t) 1448 1455 (fontified t) 1455 1461 (face font-lock-string-face fontified t) 1461 1485 (fontified t) 1485 1487 (face font-lock-keyword-face fontified t) 1487 1530 (fontified t) 1530 1536 (face font-lock-string-face fontified t) 1536 1622 (fontified t) 1622 1629 (face font-lock-builtin-face fontified t) 1629 1634 (fontified t) 1634 1642 (face font-lock-builtin-face fontified t) 1642 1648 (fontified t) 1648 1653 (face font-lock-builtin-face fontified t) 1653 1654 (fontified t) 1654 1656 (face font-lock-string-face fontified t) 1656 1738 (fontified t) 1738 1745 (face font-lock-builtin-face fontified t) 1745 1777 (fontified t) 1777 1785 (face font-lock-builtin-face fontified t) 1785 1818 (fontified t) 1818 1823 (face font-lock-builtin-face fontified t) 1823 1825 (fontified t) 1825 1831 (face font-lock-keyword-face fontified t) 1831 1875 (fontified t) 1875 1889 (face font-lock-keyword-face fontified t) 1889 1897 (fontified t) 1897 1907 (face font-lock-builtin-face fontified t) 1907 1908 (fontified t) 1908 1914 (face font-lock-builtin-face fontified t) 1914 1973 (fontified t) 1973 1986 (face font-lock-builtin-face fontified t) 1986 2045 (fontified t) 2045 2048 (face font-lock-keyword-face fontified t) 2048 2073 (fontified t) 2073 2086 (face font-lock-builtin-face fontified t) 2086 2149 (fontified t) 2149 2153 (face font-lock-keyword-face fontified t) 2153 2196 (fontified t) 2196 2199 (face font-lock-keyword-face fontified t) 2199 2239 (fontified t) 2239 2274 (fontified t) 2274 2278 (face font-lock-keyword-face fontified t) 2278 2304 (fontified t) 2304 2310 (face font-lock-keyword-face fontified t) 2310 2313 (fontified t) 2313 2371 (fontified t) 2371 2373 (face font-lock-keyword-face fontified t) 2373 2551 (fontified t)) . 5387) (undo-tree-id30 . -2551) (undo-tree-id31 . -1915) (undo-tree-id32 . -1915) (undo-tree-id33 . -1915) (undo-tree-id34 . -1915) (undo-tree-id35 . -1915) (undo-tree-id36 . -2551) (undo-tree-id37 . -2551) (undo-tree-id38 . -2551) (undo-tree-id39 . -993) (undo-tree-id40 . -913) (undo-tree-id41 . -857) (undo-tree-id42 . -816) (undo-tree-id43 . -799) (undo-tree-id44 . -779) (undo-tree-id45 . -681) (undo-tree-id46 . -551) (undo-tree-id47 . -428) (undo-tree-id48 . -309) (undo-tree-id49 . -197) (undo-tree-id50 . -94) (undo-tree-id51 . -1) (undo-tree-id52 . -2551) (undo-tree-id53 . -2551)) nil (26996 60740 575039 0) 0 nil])
([nil current ((#("
" 0 1 (fontified t)) . -5386) (undo-tree-id0 . -1) (undo-tree-id1 . -1) (undo-tree-id2 . -1) (undo-tree-id3 . -1) (undo-tree-id4 . -1) (undo-tree-id5 . -1) (undo-tree-id6 . -1) (undo-tree-id7 . -1) (undo-tree-id8 . -1) (undo-tree-id9 . -1) (undo-tree-id10 . -1) (undo-tree-id11 . -1) (undo-tree-id12 . -1) (undo-tree-id13 . -1) (undo-tree-id14 . -1) (undo-tree-id15 . -1) (undo-tree-id16 . -1) (undo-tree-id17 . -1) (undo-tree-id18 . -1) (undo-tree-id19 . -1) (undo-tree-id20 . -1) (undo-tree-id21 . -1) (undo-tree-id22 . -1) (undo-tree-id23 . -1) (undo-tree-id24 . -1) (undo-tree-id25 . -1) (undo-tree-id26 . -1) (undo-tree-id27 . -1) (undo-tree-id28 . -1) (undo-tree-id29 . -1) 5387) nil (26996 60740 575023 0) 0 nil])
nil
